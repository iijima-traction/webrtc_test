<h1><%= title %></h1>
<p>Welcome to <%= title %></p>

<video autoplay></video>
<output></output>

<pre class="prettyprint">
$(function(){
    var video = $('video')[0]

    navigator.getUserMedia_ = navigator.getUserMedia || navigator.webkitGetUserMedia;
    if(!!navigator.getUserMedia_ !== false) {
      navigator.getUserMedia_('audio,video', successCallback, errorCallback);
        function successCallback(stream) {
          video.src = window.webkitURL ?
            window.webkitURL.createObjectURL(stream) :
            stream;
        }
        function errorCallback(error) {
            console.error('An error occurred: [CODE ' + error.code + ']');
            return;
        }
    } else {
        console.log('Native web camera streaming (getUserMedia) is not supported in this browser.');
        $('output').html('Sorry, your browser doesn\'t support getUserMedia');
        return;
    }
});
</pre>


<script id="rtc">
$(function(){
    // Assign the <video> element to a variable
    var video = $('video')[0]


    // Replace the source of the video element with the stream from the camera
    navigator.getUserMedia_ = navigator.getUserMedia || navigator.webkitGetUserMedia;
    if(!!navigator.getUserMedia_ !== false) {
        navigator.getUserMedia_('audio,video', successCallback, errorCallback);
        function successCallback(stream) {
          video.src = window.webkitURL ?
            window.webkitURL.createObjectURL(stream) :
            stream;
        }
        function errorCallback(error) {
            console.error('An error occurred: [CODE ' + error.code + ']');
            return;
        }
    } else {
        console.log('Native web camera streaming (getUserMedia) is not supported in this browser.');
        $('output').html('Sorry, your browser doesn\'t support getUserMedia');
        return;
    }
    prettyPrint();
});
</script>
